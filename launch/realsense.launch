<?xml version="1.0"?>
<launch>

  <arg name="camera_name"	default="realsense"/>
  <arg name="camera_frame"	default="calibrated_$(arg camera_name)"/>
  <arg name="fps"		default="30"/>
  <arg name="cam_param_file"	default=""/>
  <arg name="mk_param_file"	default="$(dirname
					 )/../Data/Logicool640480.txt"/>
  <arg name="marker_frame"	default="marker_frame"/>
  <arg name="manager"		default=""/>
  <arg name="manager_threads"	default="4"/>

  <arg name="image_topic"	value="$(arg camera_name
				       )/aligned_depth_to_color/image_raw"/>
  <node unless="$(eval manager == '')"
	name="$(arg manager)"
	pkg ="nodelet" type="nodelet" args="manager" output="screen">
    <param name="num_worker_threads"	value="$(arg manager_threads)"/>
  </node>

  <arg name="camera_width"	default="640"/>
  <arg name="camera_height"	default="480"/>

  <include file="$(find realsense2_camera)/launch/rs_camera.launch">
    <arg name="camera"			value="$(arg camera_name)"/>
    <arg name="tf_prefix"		value="$(arg camera_frame)"/>
    <arg name="publish_tf"		value="true"/>
    <arg name="enable_depth"		value="true"/>
    <arg name="enable_infra1"		value="false"/>
    <arg name="enable_infra2"		value="false"/>
    <arg name="ordered_pc"		value="true"/>
    <arg name="align_depth"		value="true"/>
    <arg name="depth_width"		value="$(arg camera_width)"/>
    <arg name="depth_height"		value="$(arg camera_height)"/>
    <arg name="depth_fps"		value="$(arg fps)"/>
    <arg name="infra_width"		value="$(arg camera_width)"/>
    <arg name="infra_height"		value="$(arg camera_height)"/>
    <arg name="infra_fps"		value="$(arg fps)"/>
    <arg name="color_width"		value="$(arg camera_width)"/>
    <arg name="color_height"		value="$(arg camera_height)"/>
    <arg name="color_fps"		value="$(arg fps)"/>
    <arg name="external_manager"	value="$(eval manager != '')"/>
    <arg name="manager"			value="/$(arg manager)"
	 if="$(eval manager != '')"/>
  </include>

  <include file="$(dirname)/run.launch">
    <arg name="cam_param_file"	value="$(arg cam_param_file)"/>
    <arg name="mk_param_file"	value="$(arg mk_param_file)"/>
    <arg name="marker_frame"	value="$(arg marker_frame)"/>
    <arg name="image_topic"	value="$(arg image_topic)"/>
    <arg name="manager"		value="$(arg manager)"/>
  </include>

  <node name="$(anon rviz)" pkg="rviz" type="rviz" output="screen"
	args="-d $(dirname)/$(arg camera_name).rviz"/>

</launch>
